// Generated by CoffeeScript 1.3.3
(function() {
  var exec, execGitCommit, options, sys;

  options = {
    m: ''
  };

  exec = require('child_process').exec;

  sys = require('sys');

  execGitCommit = function(cb) {
    var cmd, puts,
      _this = this;
    puts = function(error, stdout, stderr) {
      if (error) {
        _this.cb(error, null);
      }
      sys.puts(stdout);
      return cb(null, stdout);
    };
    if (options.m) {
      cmd = "git commit -m '" + options.m + "'";
      exec(cmd, puts);
      return console.log(String(cmd).green.bold.inverse);
    } else {
      console.log('Please enter a commit message'.red.bold.inverse);
      process.stdin.resume();
      process.stdin.setEncoding('utf8');
      return process.stdin.on('data', function(chunk) {
        if (chunk === '\n') {
          process.stdin.pause();
          return execGitCommit(cb);
        } else {
          return options.m += chunk;
        }
      });
    }
  };

  module.exports = execGitCommit;

}).call(this);
